(function(){"use strict";var e={1487:function(e,t,n){var r=n(9242),a=n(3396);function o(e,t){const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(n)}var i=n(89);const c={},s=(0,i.Z)(c,[["render",o]]);var l=s,u=n(4161),p=n(6423),d=n(3512),h=n(9926),f=n(7530),m=n(1424),b=n(2483),v=n(7139);const g={class:"container h-100"},w={class:"row h-100 pt-3"},y={class:"col-md-3 h-100"},k=(0,a._)("h3",null,[(0,a.Uk)("台北市YouBike "),(0,a._)("br"),(0,a.Uk)(" 車輛數量查詢")],-1),_={class:"mb-2"},S=(0,a._)("option",{selected:"",value:"",disabled:""},"請選擇地區",-1),x=["value"],O={key:0,class:"card"},z=(0,a._)("div",{class:"d-flex align-items-center justify-content-center text-white warn"},[(0,a._)("p",null,"請選擇地區")],-1),M=[z],$={class:"option"},j=["onClick"],C={style:{"font-size":"20px"}},U=(0,a._)("br",null,null,-1),Z=(0,a._)("br",null,null,-1),T=(0,a._)("br",null,null,-1),L=(0,a._)("br",null,null,-1),A=(0,a._)("br",null,null,-1),D=(0,a._)("div",{class:"col-9"},[(0,a._)("div",{id:"map"})],-1);function P(e,t,n,o,i,c){return(0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("div",w,[(0,a._)("div",y,[k,(0,a._)("div",_,[(0,a.wy)((0,a._)("select",{class:"form-select form-select-xs","aria-label":".form-select-lg example","onUpdate:modelValue":t[0]||(t[0]=e=>i.cacheSearch=e),onChange:t[1]||(t[1]=(...e)=>c.updateSelect&&c.updateSelect(...e))},[S,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.area,((e,t)=>((0,a.wg)(),(0,a.iD)("option",{key:"area"+t,value:e},(0,v.zw)(e),9,x)))),128))],544),[[r.bM,i.cacheSearch]])]),i.cacheSearch?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",O,M)),(0,a._)("div",$,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.filterSearch,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"list-group",key:"filter"+t,onClick:(0,r.iM)((t=>c.cacheStation(e)),["prevent"])},[(0,a._)("a",{href:"#",class:(0,v.C_)(["list-group-item",{active:i.cacheArea.sna===e.sna}]),"aria-current":"true"},[(0,a._)("strong",C,(0,v.zw)(e.sna),1),U,(0,a.Uk)(" 地區: "+(0,v.zw)(e.sarea),1),Z,(0,a.Uk)(" 總停車格: "+(0,v.zw)(e.tot),1),T,(0,a.Uk)(" 空位數量: "+(0,v.zw)(e.bemp),1),L,(0,a.Uk)(" 目前車輛數量: "+(0,v.zw)(e.sbi),1),A,(0,a._)("small",null,"最後更新時間: "+(0,v.zw)(e.mday),1)],2)],8,j)))),128))])]),D])])}var E=n(3153),Y=n.n(E);let I={};const B={iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},G={red:new(Y().Icon)({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",...B}),blue:new(Y().Icon)({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",...B})};var H={data(){return{dataStore:[],cacheArea:"",cacheSearch:"",searchRoad:"",area:["中正區","大同區","中山區","松山區","大安區","萬華區","信義區","士林區","北投區","內湖區","南港區","文山區","臺大公館校區"]}},methods:{updateMap(){I.eachLayer((e=>{e instanceof Y().Marker&&I.removeLayer(e)})),this.filterSearch.forEach((e=>{const t=e.sbi?G.blue:G.red,n=Y().latLng(e.lat,e.lng);Y().marker(n,{icon:t}).addTo(I).bindPopup(`<p><strong style="font-size: 20px;">${e.sna}</strong></p>\n          地區: ${e.sarea}<br>\n          總停車格: ${e.tot}<br>\n          空位數量: ${e.bemp}<br>\n          目前車輛數量: ${e.sbi}<br>\n          <small>最後更新時間: ${e.mday}</small>`)}))},updateSelect(){const e=this.dataStore.find((e=>e.sarea===this.cacheSearch)),t=Y().latLng(e.lat,e.lng);I.panTo(t)},cacheStation(e){this.cacheArea=e;const t=Y().latLng(e.lat,e.lng);I.panTo(t).setZoom(16);const n=e.sbi?G.blue:G.red;Y().marker(t,{icon:n}).addTo(I).bindPopup(`<p><strong style="font-size: 20px;">${e.sna}</strong></p>\n          地區: ${e.sarea}<br>\n          總停車格: ${e.tot}<br>\n          空位數量: ${e.bemp}<br>\n          目前車輛數量: ${e.sbi}<br>\n          <small>最後更新時間: ${e.mday}</small>`).openPopup()}},computed:{filterSearch(){return this.dataStore.filter((e=>e.sarea===this.cacheSearch&&e.sna))}},watch:{filterSearch(){this.updateMap()}},mounted(){const e="https://tcgbusfs.blob.core.windows.net/dotapp/youbike/v2/youbike_immediate.json";this.$http.get(e).then((e=>{this.dataStore=e.data,this.updateMap()})),I=Y().map("map",{center:[25.03,121.55],zoom:13}),Y().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18}).addTo(I)}};const K=(0,i.Z)(H,[["render",P]]);var q=K;const F=[{path:"/",name:"home",component:q}],R=(0,b.p7)({history:(0,b.r5)(),routes:F});var V=R;const J=(0,r.ri)(l);J.use(p.Z,u.Z),J.config.productionTip=!1,J.component("l-map",d.Z),J.component("l-tile-layer",h.Z),J.component("l-marker",f.Z),J.component("l-markerClusterGroup",m.LMarkerClusterGroup),J.use(V),J.mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,r,a,o){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],o=e[u][2];for(var c=!0,s=0;s<r.length;s++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[s])}))?r.splice(s--,1):(c=!1,o<i&&(i=o));if(c){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,i=r[0],c=r[1],s=r[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(s)var u=s(n)}for(t&&t(r);l<i.length;l++)o=i[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self["webpackChunkubike_vue"]=self["webpackChunkubike_vue"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(1487)}));r=n.O(r)})();
//# sourceMappingURL=app.b0bef884.js.map